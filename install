# File: install
#!/bin/bash

# Function to detect OS
detect_os() {
    case "$(uname -s)" in
        Darwin*)    echo 'macos';;
        Linux*)     echo 'linux';;
        MINGW*|MSYS*|CYGWIN*) echo 'windows';;
        *)          echo 'unknown';;
    esac
}

# Main installation function
main() {
    OS=$(detect_os)
    echo "üîç Detected OS: $OS"

    if [ "$OS" = "windows" ]; then
        echo "üîÑ Running Windows setup..."
        ./setup.bat
    else
        echo "üîÑ Running Unix setup..."
        chmod +x setup.sh
        ./setup.sh
    fi

    # Verify installation
    echo "üîç Verifying installation..."
    git config merge.ours.driver >/dev/null 2>&1
    if [ $? -eq 0 ]; then
        echo "‚úÖ Merge driver configured successfully"
    else
        echo "‚ùå Merge driver configuration failed"
        exit 1
    fi
}

# Run installation
main